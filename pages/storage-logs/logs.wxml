<!-- pages/storage-logs/logs.wxml -->
<view class="container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stat-card">
      <text class="stat-value">{{statistics.total_semi || 0}}</text>
      <text class="stat-label">æ€»è®¡ä»¶æ•°</text>
    </view>
    <view class="stat-card">
      <text class="stat-value success">{{statistics.total_storage || 0}}</text>
      <text class="stat-label">æˆåŠŸå…¥åº“</text>
    </view>
    <view class="stat-card">
      <text class="stat-value warning">{{statistics.total_failed || 0}}</text>
      <text class="stat-label">æœªå…¥åº“</text>
    </view>
    <view class="stat-card">
      <text class="stat-value">{{statistics.success_rate || 0}}%</text>
      <text class="stat-label">æˆåŠŸç‡</text>
    </view>
  </view>

  <!-- æ—¥å¿—åˆ—è¡¨ -->
  <view class="logs-list">
    <view class="log-item" wx:for="{{logs}}" wx:key="id" bindtap="viewDetail" data-id="{{item.id}}">
      <view class="log-header">
        <text class="log-date">{{item.log_date}}</text>
        <view class="log-badge" wx:if="{{item.failed_count > 0}}">
          <text class="badge-text">{{item.failed_count}}æ¡æœªå…¥åº“</text>
        </view>
      </view>

      <view class="log-stats">
        <view class="log-stat">
          <text class="stat-num">{{item.semi_finished_count}}</text>
          <text class="stat-text">è®¡ä»¶</text>
        </view>
        <text class="arrow">â†’</text>
        <view class="log-stat success">
          <text class="stat-num">{{item.storage_count}}</text>
          <text class="stat-text">å…¥åº“</text>
        </view>
        <view class="log-stat worker">
          <text class="stat-num">{{item.worker_count}}</text>
          <text class="stat-text">å·¥äºº</text>
        </view>
      </view>

      <view class="log-summary">
        <text class="summary-text">è®¡ä»¶{{item.semi_finished_quantity}}ä¸ª | å…¥åº“{{item.storage_quantity}}ä¸ª | {{item.product_types}}ç§äº§å“</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}">
    <button class="load-btn" bindtap="loadMore" loading="{{loading}}">åŠ è½½æ›´å¤š</button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{logs.length === 0 && !loading}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— æ—¥å¿—æ•°æ®</text>
  </view>
</view>
