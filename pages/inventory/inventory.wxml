<!-- pages/inventory/inventory.wxml -->
<view class="container">
  <!-- æœç´¢æ¡† -->
  <view class="search-section">
    <input
      class="search-input"
      placeholder="æœç´¢äº§å“åç§°"
      value="{{keyword}}"
      bindinput="onKeywordInput"
      bindconfirm="searchInventory"
    />
    <view class="search-btn" bindtap="searchInventory">æœç´¢</view>
  </view>

  <!-- åˆ†ç±»åˆ‡æ¢ -->
  <view class="category-tabs">
    <view
      class="tab-item {{currentTab === 'parts' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="parts"
    >é›¶ä»¶åº“å­˜</view>
    <view
      class="tab-item {{currentTab === 'blank' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="blank"
    >æ¯›å¯åº“å­˜</view>
    <view
      class="tab-item {{currentTab === 'finished' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="finished"
    >æˆå“åº“å­˜</view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-bar">
    <view class="action-btn add-btn" bindtap="addInventory" wx:if="{{currentTab !== 'finished'}}">
      <text class="action-icon">+</text>
      <text>æ·»åŠ {{currentTab === 'parts' ? 'é›¶ä»¶' : 'æ¯›å¯'}}</text>
    </view>
    <view class="action-btn assembly-btn" bindtap="goAssembly">
      <text class="action-icon">ğŸ”§</text>
      <text>äº§å“ç»„è£…</text>
    </view>
  </view>

  <!-- åº“å­˜åˆ—è¡¨ -->
  <scroll-view
    scroll-y
    class="inventory-list"
    bindscrolltolower="loadMore"
    wx:if="{{inventoryList.length > 0}}"
  >
    <view class="inventory-item {{item.quantity < 0 ? 'warning' : (item.quantity === 0 ? 'empty' : '')}}"
          wx:for="{{inventoryList}}" wx:key="id"
          bindtap="viewDetail" data-item="{{item}}">
      <!-- ä½åº“å­˜/æ— åº“å­˜æ ‡è¯† -->
      <view class="stock-badge low" wx:if="{{item.quantity > 0 && item.quantity <= 10}}">åº“å­˜ä¸è¶³</view>
      <view class="stock-badge empty" wx:if="{{item.quantity === 0}}">æ— åº“å­˜</view>
      <view class="stock-badge negative" wx:if="{{item.quantity < 0}}">åº“å­˜å¼‚å¸¸</view>

      <view class="item-main">
        <text class="product-name">{{item.productName}}</text>
        <view class="item-specs">
          <text class="tag spec-tag" wx:if="{{item.specification}}">{{item.specification}}</text>
          <text class="tag material-tag" wx:if="{{item.material}}">{{item.material}}</text>
          <text class="tag connection-tag" wx:if="{{item.connectionType}}">{{item.connectionType}}</text>
        </view>
      </view>
      <view class="item-right">
        <view class="item-quantity {{item.quantity < 0 ? 'negative' : ''}}">
          <text class="quantity-value">{{item.quantity}}</text>
          <text class="quantity-unit">{{item.unit || 'ä¸ª'}}</text>
        </view>
        <text class="arrow">â€º</text>
      </view>
    </view>
  </scroll-view>

  <view class="empty-state" wx:else>
    <text class="empty-icon">ğŸ“¦</text>
    <text class="empty-text">æš‚æ— åº“å­˜æ•°æ®</text>
  </view>
</view>

