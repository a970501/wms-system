<!-- components/offline-status/offline-status.wxml -->
<view class="offline-status {{customClass}} position-{{position}}" wx:if="{{!isOnline || offlineQueueSize > 0 || isSyncing}}">
  
  <!-- ç¦»çº¿çŠ¶æ€æ  -->
  <view class="status-bar" wx:if="{{!isOnline}}">
    <view class="status-icon offline-icon">ğŸ“µ</view>
    <view class="status-text">
      <text class="status-title">ç¦»çº¿æ¨¡å¼</text>
      <text class="status-desc" wx:if="{{offlineQueueSize > 0}}">{{offlineQueueSize}}æ¡æ•°æ®å¾…åŒæ­¥</text>
    </view>
    <view class="status-actions" wx:if="{{offlineQueueSize > 0}}">
      <button class="action-btn" size="mini" bindtap="toggleSyncDetails">è¯¦æƒ…</button>
    </view>
  </view>

  <!-- åŒæ­¥çŠ¶æ€æ  -->
  <view class="status-bar syncing" wx:if="{{isSyncing}}">
    <view class="status-icon sync-icon">ğŸ”„</view>
    <view class="status-text">
      <text class="status-title">æ­£åœ¨åŒæ­¥...</text>
      <text class="status-desc">{{syncProgress}}%</text>
    </view>
    <view class="sync-progress">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{syncProgress}}%;"></view>
      </view>
    </view>
  </view>

  <!-- å¾…åŒæ­¥çŠ¶æ€æ  -->
  <view class="status-bar pending" wx:if="{{isOnline && offlineQueueSize > 0 && !isSyncing}}">
    <view class="status-icon pending-icon">â³</view>
    <view class="status-text">
      <text class="status-title">æœ‰{{offlineQueueSize}}æ¡æ•°æ®å¾…åŒæ­¥</text>
      <text class="status-desc" wx:if="{{lastSyncTime}}">ä¸Šæ¬¡åŒæ­¥: {{lastSyncTime}}</text>
    </view>
    <view class="status-actions">
      <button class="action-btn primary" size="mini" bindtap="onManualSync">ç«‹å³åŒæ­¥</button>
      <button class="action-btn" size="mini" bindtap="toggleSyncDetails">è¯¦æƒ…</button>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯é¢æ¿ -->
  <view class="sync-details" wx:if="{{showSyncDetails && showDetails}}">
    <view class="details-header">
      <text class="details-title">ç¦»çº¿æ•°æ®è¯¦æƒ…</text>
      <button class="close-btn" size="mini" bindtap="toggleSyncDetails">Ã—</button>
    </view>
    
    <view class="details-content">
      <view class="detail-item">
        <text class="detail-label">ç½‘ç»œçŠ¶æ€:</text>
        <text class="detail-value {{isOnline ? 'online' : 'offline'}}">
          {{isOnline ? 'å·²è¿æ¥' : 'å·²æ–­å¼€'}} ({{getNetworkTypeText(networkType)}})
        </text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">å¾…åŒæ­¥æ•°æ®:</text>
        <text class="detail-value">{{offlineQueueSize}}æ¡</text>
      </view>
      
      <view class="detail-item" wx:if="{{lastSyncTime}}">
        <text class="detail-label">ä¸Šæ¬¡åŒæ­¥:</text>
        <text class="detail-value">{{lastSyncTime}}</text>
      </view>
    </view>
    
    <view class="details-actions">
      <button 
        class="detail-action-btn {{!isOnline || isSyncing ? 'disabled' : ''}}" 
        size="small" 
        bindtap="onManualSync"
        disabled="{{!isOnline || isSyncing}}"
      >
        {{isSyncing ? 'åŒæ­¥ä¸­...' : 'ç«‹å³åŒæ­¥'}}
      </button>
      
      <button 
        class="detail-action-btn danger {{offlineQueueSize === 0 ? 'disabled' : ''}}" 
        size="small" 
        bindtap="onClearQueue"
        disabled="{{offlineQueueSize === 0}}"
      >
        æ¸…ç©ºé˜Ÿåˆ—
      </button>
    </view>
  </view>
</view>